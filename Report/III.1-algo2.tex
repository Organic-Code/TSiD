\begin{lstlisting}[breaklines]
procedure mainLoop()
|
|	directory: table of characters
|	command: integer
|	
|	while true do
|	|
|	|	receiveFromClient( command )
|	|	receiveFromClient( directory )
|	|
|	|	switch command
|	|	|	.
|	|	|	.
|	|	|	.
|	|	|	case upload: retrieveAFile( directory )
|	|	|	.
|	|	|	.
|	|	|	.
|	|	end
|	done
done
\end{lstlisting}